"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.FormUrlencoded = exports.TransformFormUrlencoded = void 0;
const index_1 = require("./config/index");
const http_form_urlencoded_1 = __importDefault(require("http-form-urlencoded"));
const headers_1 = require("./headers");
const decorators_1 = require("../helper/decorators");
/**
 * 請將此 decorators 放在其他 TransformRequest 之前
 */
function TransformFormUrlencoded(target, propertyName) {
    decorators_1.checkMemberDecoratorsOnly(`TransformFormUrlencoded`, target, propertyName);
    return index_1.TransformRequest((data, headers) => {
        if (data && !Array.isArray(data) && typeof data === 'object') {
            let u = new http_form_urlencoded_1.default();
            u.extend(data);
            return u.toString();
        }
        return data;
    })(target, propertyName);
}
exports.TransformFormUrlencoded = TransformFormUrlencoded;
/**
 * 請將此 decorators 放在其他 TransformRequest 之前
 */
function FormUrlencoded(target, propertyName) {
    decorators_1.checkMemberDecoratorsOnly(`FormUrlencoded`, target, propertyName);
    headers_1.Headers({
        'Content-Type': 'application/x-www-form-urlencoded',
    })(target, propertyName);
    TransformFormUrlencoded(target, propertyName);
}
exports.FormUrlencoded = FormUrlencoded;
exports.default = FormUrlencoded;
//# sourceMappingURL=form.js.map